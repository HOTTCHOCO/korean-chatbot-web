# 대화 로그 저장 및 재열람 기능

**Task ID:** T-007
**Status:** BACKLOG
**Importance:** MUST
**Complexity:** 5/10
**Urgency:** 7/10
**Dependencies:** T-002, T-003, T-004, T-006

## Description

### 설명
사용자의 대화 기록을 Supabase DB에 저장하고, 이전 대화 내역을 조회·복습할 수 있는 UI/API를 구현합니다. 즐겨찾기 표시는 MVP 이후로 미룹니다.

### 구현 상세
1.  **백엔드 (저장 로직)**: `chat.service.ts`에서 OpenAI로부터 완전한 응답을 받은 후, 해당 사용자의 질문과 AI의 답변을 `messages` 테이블에 저장합니다. 이 때, `user_id`와 `conversation_id`를 함께 기록합니다. 새로운 대화일 경우, `conversations` 테이블에 먼저 새 레코드를 생성합니다.
2.  **백엔드 (조회 API)**: 
    -   `GET /api/conversations`: 현재 로그인한 사용자의 모든 대화 목록을 조회하는 API를 구현합니다.
    -   `GET /api/conversations/:id`: 특정 대화 ID에 해당하는 모든 메시지 기록을 조회하는 API를 구현합니다.
3.  **프론트엔드 (UI)**: 
    -   과거 대화 목록을 보여주는 `ConversationHistory.tsx` 페이지 또는 컴포넌트를 개발합니다.
    -   사용자가 목록에서 특정 대화를 클릭하면, 조회 API를 호출하여 해당 대화 내용을 채팅 인터페이스에 불러와 표시합니다.

### 테스트 전략
- **API 기능 테스트 (Postman)**:
    -   `GET /api/conversations`를 호출하여 인증된 사용자의 대화 목록만 정확히 반환되는지 확인합니다.
    -   `GET /api/conversations/:id`를 호출하여 특정 대화의 메시지들이 순서대로 올바르게 반환되는지 확인합니다.
- **엔드투엔드 시나리오 테스트**:
    -   사용자가 새로운 대화를 나눈 후, 대화 기록 페이지로 이동하여 방금 나눈 대화가 목록에 추가되었는지 확인합니다.
    -   해당 대화를 클릭했을 때, 전체 대화 내용이 채팅창에 정확하게 복원되는지 검증합니다.

---

**Created:** 2025-08-07T03:01:17.682Z
**Updated:** 2025-08-07T03:01:17.682Z
